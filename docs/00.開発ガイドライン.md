# 開発ガイドライン（AI駆動開発 - Cursor）

## 前提

このドキュメントは、AI（LLM）を使ってコードを記述するための実践ガイドです。  
単に「書かせる」のではなく、設計 → 実装まで一貫して任せるための準備と手順を記載します。  
なお、READMEはリポジトリ全体の責務の分離と構成の要となるファイルです。  

### 手順概要

1. **READMEをLLMに読ませる。**  
   1. Cursorは最新モデルを使用する（2025/07/03時点：claude-4-sonnet）。  
   2. モードは Agent モードを使用（25回連続推論の挙動）。  
   3. README をチャットコンテキストにドラッグ＆ドロップして「読め」と一言入れて送信。  
   4. （任意）ある程度プロジェクトができているので、似た機能があれば「1機能・1画面」をフォルダごと読み込ませてもよい。

2. **機能のプロンプトを考えて、READMEの文脈が入ったLLMにコードのスケルトンを実装させる。**  
   1. （任意）DB設計が必要ならdatabase.dbmlをコンテキストに追加して設計させる。  
   2. （任意）関連機能や画面があれば、エンドポイントフォルダやSwaggerファイル、画面の Pages/Template/Organisms 辺りを追加。  
   3. （重要）分かっている範囲の要件や仕様は、サボらず全部テキスト（プロンプト）化する。  
   4. プロンプトが思い浮かばない場合、要件がまだ固まってない可能性あり。  
      → チャット上で要件定義を行い、まとまったら「この機能の完全な仕様を**バッククォート4つで括ってマークダウンブロックで示して**」とまとめさせ、別チャットで実装を進める。（このプロンプトは固定ではない）  
   5. 要件・仕様のプロンプトが完成したら、満を持して送信してコード生成。  
      ※ここでほぼ動くコードが出れば成功。全然動かない場合、プロンプトの方向性が悪い可能性あり。

3. **詳細設計書のテンプレートを与えて、スケルトンを新規ファイルとして生成させる。**  
   1. 実装直後はコンテキストが残っているので、同じチャットでテンプレートを読み込ませる。  
   2. 以下のように送信（このプロンプトは固定ではない）：

   ```text
   必要最低限の要素を備えた詳細設計書のテンプレートをコンテキストに追加したので、機能の実装に合わせて内容を拡張しながら、同じ拡張子で詳細設計書ファイルを作成してください。粒度は、別のLLMにREADMEとあなたが作成する設計書を与えれば、同じ機能を再実装できるレベル。
   ```

4. **詳細設計スケルトンを見て、開発者が「ここ分離・統合すべき」と判断して設計内容を詰める。**  
   - 詳細設計書はプロンプトでもある。  
   - READMEの構成方針から逸脱しないこと。 
   - このフェーズは機能によって異なるので、ここは気合いで調整。 
   - あまり長いこと話していると頓珍漢なことを言い出すので、チャットを切り替えてREADMEを再読ませること。 

5. **詳細設計書をプロンプトとしてLLMに再度コードを書かせる。**  
   1. 設計書が固まったら、そのまま送信してコードを生成。（新しいチャットでもOK）  
   2. 設計通りでない箇所や細かい部分は手動で修正してOK。  
   3. （超任意）一度コミットしてから一時的に巻き戻して、設計書から再実装できるかテストするのも有効。  
      ※詳細設計書の保管場所は要検討。